import { initializeApp } from "firebase/app";
import {
  getFirestore, doc, setDoc, onSnapshot, serverTimestamp
} from "firebase/firestore";
import {
  getAuth, signInAnonymously, signInWithEmailAndPassword, onAuthStateChanged, signOut
} from "firebase/auth";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_AUTH_DOMAIN",
  projectId: "YOUR_PROJECT_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
export const db = getFirestore(app);
export const auth = getAuth(app);

// POS (kiosk) → Anonymous
export async function signInPOS() { await signInAnonymously(auth); }

// Admin → email + PIN (PIN = password you created in Firebase Users)
export function adminSignIn(email, pin) {
  return signInWithEmailAndPassword(auth, email, pin);
}
export function adminSignOut() { return signOut(auth); }

export { doc, setDoc, onSnapshot, serverTimestamp, onAuthStateChanged };
